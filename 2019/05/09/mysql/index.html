
 <!DOCTYPE HTML>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
  
    <title>MySQL 基本使用 | techbird blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="techbird">
    

    
    <meta name="description" content="SQL的分类DDL(Data Definition Language)数据定义语言，用来定义数据库对象：数据库，表，列等。关键字：create，drop，alter 等 DML(Data Manipulation Language)数据操作语言，用来对数据库表中的数据进行增删改。关键字：insert，delete，update 等 DQL(Data Query Language)数据查询语言，用来">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL 基本使用">
<meta property="og:url" content="https://hashcode.cn/2019/05/09/mysql/index.html">
<meta property="og:site_name" content="techbird blog">
<meta property="og:description" content="SQL的分类DDL(Data Definition Language)数据定义语言，用来定义数据库对象：数据库，表，列等。关键字：create，drop，alter 等 DML(Data Manipulation Language)数据操作语言，用来对数据库表中的数据进行增删改。关键字：insert，delete，update 等 DQL(Data Query Language)数据查询语言，用来">
<meta property="article:published_time" content="2019-05-09T02:01:47.000Z">
<meta property="article:modified_time" content="2021-08-23T14:38:01.018Z">
<meta property="article:author" content="techbird">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@murendless">

    
    <link rel="alternative" href="/atom.xml" title="techbird blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/%02.css">
<link rel="stylesheet" href="/.css">

<meta name="generator" content="Hexo 4.2.0"></head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="techbird blog" title="techbird blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="techbird blog">techbird blog</a></h1>
				<h2 class="blog-motto">timeline of growth</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives/">Archives</a></li>
					
						<li><a href="/about/">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:hashcode.cn">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/05/09/mysql/" title="MySQL 基本使用" itemprop="url">MySQL 基本使用</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="techbird" target="_blank" itemprop="author">techbird</a>
		
  <p class="article-time">
    <time datetime="2019-05-09T02:01:47.000Z" itemprop="datePublished"> Published 2019-05-09 10:01</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL的分类"><span class="toc-number">1.</span> <span class="toc-text">SQL的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DDL-Data-Definition-Language"><span class="toc-number">1.1.</span> <span class="toc-text">DDL(Data Definition Language)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DML-Data-Manipulation-Language"><span class="toc-number">1.2.</span> <span class="toc-text">DML(Data Manipulation Language)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DQL-Data-Query-Language"><span class="toc-number">1.3.</span> <span class="toc-text">DQL(Data Query Language)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DCL-Data-Control-Language"><span class="toc-number">1.4.</span> <span class="toc-text">DCL(Data Control Language)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DDL-操作数据库-CRUD"><span class="toc-number">2.</span> <span class="toc-text">DDL 操作数据库(CRUD)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#C-Create"><span class="toc-number">2.1.</span> <span class="toc-text">C(Create)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#R-Retrieve"><span class="toc-number">2.2.</span> <span class="toc-text">R(Retrieve)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#U-Update"><span class="toc-number">2.3.</span> <span class="toc-text">U(Update)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#D-Delete"><span class="toc-number">2.4.</span> <span class="toc-text">D(Delete)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用数据库"><span class="toc-number">2.5.</span> <span class="toc-text">使用数据库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DML-操作表"><span class="toc-number">3.</span> <span class="toc-text">DML 操作表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#C-Create-1"><span class="toc-number">3.1.</span> <span class="toc-text">C(Create)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#R-Retrieve-1"><span class="toc-number">3.2.</span> <span class="toc-text">R(Retrieve)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#U-Update-1"><span class="toc-number">3.3.</span> <span class="toc-text">U(Update)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除数据"><span class="toc-number">3.4.</span> <span class="toc-text">删除数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改数据"><span class="toc-number">3.5.</span> <span class="toc-text">修改数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DQL-查询语句"><span class="toc-number">4.</span> <span class="toc-text">DQL 查询语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#排序查询"><span class="toc-number">4.1.</span> <span class="toc-text">排序查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#聚合函数"><span class="toc-number">4.2.</span> <span class="toc-text">聚合函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分组查询"><span class="toc-number">4.3.</span> <span class="toc-text">分组查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分页查询"><span class="toc-number">4.4.</span> <span class="toc-text">分页查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DQL-查询表中的语句"><span class="toc-number">5.</span> <span class="toc-text">DQL 查询表中的语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#语法"><span class="toc-number">5.1.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基础查询"><span class="toc-number">5.2.</span> <span class="toc-text">基础查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#条件查询"><span class="toc-number">5.3.</span> <span class="toc-text">条件查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多表查询"><span class="toc-number">5.4.</span> <span class="toc-text">多表查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#约束-Constriant"><span class="toc-number">6.</span> <span class="toc-text">约束(Constriant)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#非空约束"><span class="toc-number">6.1.</span> <span class="toc-text">非空约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#唯一约束"><span class="toc-number">6.2.</span> <span class="toc-text">唯一约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#主键约束"><span class="toc-number">6.3.</span> <span class="toc-text">主键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自增长"><span class="toc-number">6.4.</span> <span class="toc-text">自增长</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#外键约束"><span class="toc-number">6.5.</span> <span class="toc-text">外键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#级联操作"><span class="toc-number">6.6.</span> <span class="toc-text">级联操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据库的设计"><span class="toc-number">7.</span> <span class="toc-text">数据库的设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#多表之间的关系"><span class="toc-number">7.1.</span> <span class="toc-text">多表之间的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库设计的范式"><span class="toc-number">7.2.</span> <span class="toc-text">数据库设计的范式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据库的备份和还原"><span class="toc-number">8.</span> <span class="toc-text">数据库的备份和还原</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#备份"><span class="toc-number">8.1.</span> <span class="toc-text">备份</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#还原"><span class="toc-number">8.2.</span> <span class="toc-text">还原</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#事务"><span class="toc-number">9.</span> <span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#事务的基本介绍"><span class="toc-number">9.1.</span> <span class="toc-text">事务的基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事务的四大基本特征"><span class="toc-number">9.2.</span> <span class="toc-text">事务的四大基本特征</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事务的隔离级别"><span class="toc-number">9.3.</span> <span class="toc-text">事务的隔离级别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DCL-管理、授权用户"><span class="toc-number">10.</span> <span class="toc-text">DCL 管理、授权用户</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#用户管理"><span class="toc-number">10.1.</span> <span class="toc-text">用户管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#权限管理"><span class="toc-number">10.2.</span> <span class="toc-text">权限管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#修改-mysql-设置"><span class="toc-number">11.</span> <span class="toc-text">修改 mysql 设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#更改默认编码"><span class="toc-number">11.1.</span> <span class="toc-text">更改默认编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#忘记root用户密码"><span class="toc-number">11.2.</span> <span class="toc-text">忘记root用户密码</span></a></li></ol></li></ol>
		
		</div>
		
		<h2 id="SQL的分类"><a href="#SQL的分类" class="headerlink" title="SQL的分类"></a>SQL的分类</h2><h3 id="DDL-Data-Definition-Language"><a href="#DDL-Data-Definition-Language" class="headerlink" title="DDL(Data Definition Language)"></a>DDL(Data Definition Language)</h3><p>数据定义语言，用来定义数据库对象：数据库，表，列等。关键字：create，drop，alter 等</p>
<h3 id="DML-Data-Manipulation-Language"><a href="#DML-Data-Manipulation-Language" class="headerlink" title="DML(Data Manipulation Language)"></a>DML(Data Manipulation Language)</h3><p>数据操作语言，用来对数据库表中的数据进行增删改。关键字：insert，delete，update 等</p>
<h3 id="DQL-Data-Query-Language"><a href="#DQL-Data-Query-Language" class="headerlink" title="DQL(Data Query Language)"></a>DQL(Data Query Language)</h3><p>数据查询语言，用来查询数据库表中的记录（数据）。关键字：select，where 等</p>
<h3 id="DCL-Data-Control-Language"><a href="#DCL-Data-Control-Language" class="headerlink" title="DCL(Data Control Language)"></a>DCL(Data Control Language)</h3><p>用来定义数据库的访问权限和安全级别，及创建用户。关键字：GRANT，REVOKE 等</p>
<h2 id="DDL-操作数据库-CRUD"><a href="#DDL-操作数据库-CRUD" class="headerlink" title="DDL 操作数据库(CRUD)"></a>DDL 操作数据库(CRUD)</h2><h3 id="C-Create"><a href="#C-Create" class="headerlink" title="C(Create)"></a>C(Create)</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create database dbname;</span><br><span class="line">create database if not exist dbname;</span><br><span class="line">create database dbname character set utf8;</span><br><span class="line">create database if not exist dbname character set utf8;</span><br></pre></td></tr></table></figure>
<h3 id="R-Retrieve"><a href="#R-Retrieve" class="headerlink" title="R(Retrieve)"></a>R(Retrieve)</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- 查询所有数据库的名称</span><br><span class="line">show databases;</span><br><span class="line">-- 查询某个数据库的字符集&#x2F;创建语句</span><br><span class="line">show crate database dbname;</span><br></pre></td></tr></table></figure>
<h3 id="U-Update"><a href="#U-Update" class="headerlink" title="U(Update)"></a>U(Update)</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter database dbname character set utf8;</span><br></pre></td></tr></table></figure>
<h3 id="D-Delete"><a href="#D-Delete" class="headerlink" title="D(Delete)"></a>D(Delete)</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drop database dbname;</span><br><span class="line">drop database if  exist dbname;</span><br></pre></td></tr></table></figure>
<h3 id="使用数据库"><a href="#使用数据库" class="headerlink" title="使用数据库"></a>使用数据库</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- 查询当前正在使用的数据库</span><br><span class="line">select database();</span><br><span class="line">-- 使用指定的数据库</span><br><span class="line">use dbname;</span><br></pre></td></tr></table></figure>
<h2 id="DML-操作表"><a href="#DML-操作表" class="headerlink" title="DML 操作表"></a>DML 操作表</h2><h3 id="C-Create-1"><a href="#C-Create-1" class="headerlink" title="C(Create)"></a>C(Create)</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create table tbname(</span><br><span class="line">    列名1 数据类型1，</span><br><span class="line">    列名2 数据类型2，</span><br><span class="line">    ...</span><br><span class="line">    列名n 数据类型n</span><br><span class="line">);</span><br><span class="line">-- 赋值一张表</span><br><span class="line">create table 表名 like 被复制的表名;</span><br></pre></td></tr></table></figure>
<ul>
<li>数据类型：</li>
</ul>
<ol>
<li><code>int</code>:整数类型<ul>
<li>age int</li>
</ul>
</li>
<li><code>double</code>:小数类型<ul>
<li>score double(5,2)</li>
</ul>
</li>
<li><code>date</code>:日期，只包含年月日，yyyy-MM-dd</li>
<li><code>datetime</code>:日期，年月日时分秒 yyyy-MM-dd HH:mm:ss</li>
<li><code>timestamp</code>:时间戳类型，包含年月日时分秒 yyyy-MM-dd HH:mm:ss（如果将来不给这个字段赋值，或者赋值为Null，则默认使用当前的系统时间来自动赋值）</li>
<li><code>varchar</code>:字符串类型<ul>
<li>name varchar(20):姓名最多20个字符</li>
<li>zhangsan 8个字符，张三 2个字符</li>
</ul>
</li>
</ol>
<h3 id="R-Retrieve-1"><a href="#R-Retrieve-1" class="headerlink" title="R(Retrieve)"></a>R(Retrieve)</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- 查询数据库中所有表名称</span><br><span class="line">show tables;</span><br><span class="line">-- 查询表结构</span><br><span class="line">desc tbname;</span><br></pre></td></tr></table></figure>
<h3 id="U-Update-1"><a href="#U-Update-1" class="headerlink" title="U(Update)"></a>U(Update)</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- 修改表名</span><br><span class="line">alter table tbname rename to newtbname;</span><br><span class="line">-- 查看表的字符集</span><br><span class="line">show create table tbname;</span><br><span class="line">-- 修改表的字符集</span><br><span class="line">alter table tbname character set utf8;</span><br><span class="line">-- 添加一列</span><br><span class="line">alter table tbname add column_name varchar(10);</span><br><span class="line">-- 修改列名称、数据类型</span><br><span class="line">alter table tbname change gender sex varchar(20);</span><br><span class="line">-- 只修列的数据类型</span><br><span class="line">alter table tbname modify sex varchar(10);</span><br><span class="line">-- 删除列</span><br><span class="line">alter table tbname drop column_name;</span><br><span class="line">&#96;&#96;&#96; </span><br><span class="line">### D(Delete)</span><br><span class="line">&#96;&#96;&#96;mysql</span><br><span class="line">drop table tbname;</span><br><span class="line">drop table if exists tbname;</span><br><span class="line">&#96;&#96;&#96; </span><br><span class="line"></span><br><span class="line">## DML 操作表</span><br><span class="line">### 添加数据</span><br><span class="line">&#96;&#96;&#96;mysql</span><br><span class="line">insert into tbname(列名1,...列名n) values(值1,...值n);</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：</p>
<ol>
<li>列名要和值名一一对应，如果表名后不指定列名，则默认给所有列添加值。</li>
<li>insert into tbname values(值1,…值n);</li>
<li>值除了数字以外，其他都需要用引号（单双都可以）引起来</li>
</ol>
<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">delete from tbname [where condition];</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<ul>
<li>如果不加条件，则删除表中所有的记录</li>
<li>如果要删除所有记录<ol>
<li>delete from tbname; – 不推荐使用，因为有多少条记录就会执行多少次删除操作</li>
<li>truncate table tbname; – 推荐使用，先删除表，在创建一张一样的空表；效率更高</li>
</ol>
</li>
</ul>
<h3 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">update tbname set 列名1 &#x3D; 值1,列名2 &#x3D; 值2,...[where condition];</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：如果不加任何条件，则会将表中所有记录全部修改。</p>
<h2 id="DQL-查询语句"><a href="#DQL-查询语句" class="headerlink" title="DQL 查询语句"></a>DQL 查询语句</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from tbname;</span><br></pre></td></tr></table></figure>
<h3 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h3><ul>
<li>语法：<code>order by 子句;</code> <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">order by 排序子句1 排序方式1,...排序子句2 排序方式n;</span><br></pre></td></tr></table></figure></li>
<li>排序方式<br>  <code>ASC</code>：升序，默认的。<br>  <code>DESC</code>：降序。</li>
</ul>
<p><strong>注意</strong>：如果有多个排序条件，则当前面的条件值一样时候，才会判断第二条件，以此类推。</p>
<h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><p>将一列数据作为一个整体，进行纵向的计算。</p>
<ol>
<li><p>count：计算个数</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select count(id) from tbname;</span><br></pre></td></tr></table></figure>
<ul>
<li>一般选择非空的列：主键</li>
<li>count(*) – 不建议使用</li>
</ul>
</li>
<li><p>max：计算最大值</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select max(列名) from tbname;</span><br></pre></td></tr></table></figure></li>
<li><p>min：计算最小值</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select min(列名) from tbname;</span><br></pre></td></tr></table></figure></li>
<li><p>sum：计算和</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select sum(列名) from tbname;</span><br></pre></td></tr></table></figure></li>
<li><p>avg：计算平均值</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select avg(列名) from tbname;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p><strong>注意</strong>：聚合函数的计算，排除null值<br><strong>解决方案</strong>：</p>
<ol>
<li>选择不包含空的列进行计算</li>
<li><code>IFNULL</code>函数<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select count(IFNULL(列名,0)) from tbname;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h3><ul>
<li>语法：<code>group by 分组字段</code></li>
</ul>
<p><strong>注意</strong>：</p>
<ul>
<li><p>分组之后查询的字段：分组字段，聚合函数</p>
</li>
<li><p><code>where</code> 和 <code>having</code> 的区别</p>
</li>
</ul>
<ol>
<li><code>where</code> 在分组之前进行限定，如果不满足条件，则不参与分组。</li>
<li><code>having</code> 在分组之后进行限定，如果不满足结果，则不会被查询出来</li>
<li><code>where</code> 后可以跟聚合函数，<code>having</code> 可以进行聚合函数的判断</li>
</ol>
<h3 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h3><ol>
<li>语法：<code>limit 开始索引,每页查询条数;</code></li>
<li>公式：开始的索引 = （当前的页码 - 1）* 每页显示的条数<br>eg：– 每页显示三条记录<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SELECT * FROM TBNAME LIMIT 0,3; -- 第1页</span><br><span class="line">SELECT * FROM TBNAME LIMIT 3,3; -- 第2页</span><br><span class="line">SELECT * FROM TBNAME LIMIT 6,3; -- 第3页</span><br></pre></td></tr></table></figure></li>
<li><code>limit</code>是一个mysql的「方言」</li>
</ol>
<h2 id="DQL-查询表中的语句"><a href="#DQL-查询表中的语句" class="headerlink" title="DQL 查询表中的语句"></a>DQL 查询表中的语句</h2><ul>
<li>select * from tbname;</li>
</ul>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select </span><br><span class="line">    字段列表</span><br><span class="line">from </span><br><span class="line">    表名列表</span><br><span class="line">where </span><br><span class="line">    条件列表</span><br><span class="line">group by </span><br><span class="line">    分组字段</span><br><span class="line">having</span><br><span class="line">    分组之后的条件</span><br><span class="line">order by </span><br><span class="line">    排序子句列表</span><br><span class="line">limit</span><br><span class="line">    分页限定</span><br></pre></td></tr></table></figure>

<h3 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h3><ol>
<li>多个字段的查询<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select 字段名1,...字段名n from tbname;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>注意</strong>：如果查询所有字段，则可以用*来代替字段列表<br>2. 去除重复：<code>distinct</code><br>3. 多列的值计算</p>
<ul>
<li>一般可以使用四则运算计算一些列的值。</li>
<li><code>ifnull(表达式1,表达式2)</code>：null参与的运算，计算结果都为null<br>  表达式1:那个字段需要判断是否为Null<br>  表达式2：如果该字段为Null后的替换值</li>
</ul>
<ol start="4">
<li>别名：<code>as</code>，也可以省略用空格替代。</li>
</ol>
<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><ol>
<li>where子句后跟条件</li>
<li>运算符<br><code>&gt;、&lt;、&lt;=、&gt;=、=、&lt;&gt;</code><br><code>BETWEEN...AND...</code><br><code>IN(集合)</code>、<code>NOT IN(集合)</code><br><code>IS NULL</code> 、<code>IS NOT NULL</code><br><code>AND / &amp;&amp;</code><br><code>OR / ||</code><br><code>NOT / !</code><br><code>LIKE</code>：模糊查询。占位符有：<code>_</code>表示单个任意字符，<code>%</code>表示多个任意字符。</li>
</ol>
<ul>
<li>用法示例:<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- 查询年龄大于20岁</span><br><span class="line">SELECT  * FROM tbname WHERE age &gt; 20;</span><br><span class="line">SELECT  * FROM tbname WHERE age &gt;&#x3D; 20;</span><br><span class="line">-- 查询年龄等于20岁</span><br><span class="line">SELECT  * FROM tbname WHERE age &#x3D; 20;</span><br><span class="line">-- 查询年龄不等于20岁</span><br><span class="line">SELECT  * FROM tbname WHERE age !&#x3D; 20;</span><br><span class="line">SELECT  * FROM tbname WHERE age &lt;&gt; 20;</span><br><span class="line">-- 查询年龄大于等于20，小于等于30</span><br><span class="line">SELECT  * FROM tbname WHERE age &gt;&#x3D; 20 &amp;&amp; age &lt;&#x3D; 30;</span><br><span class="line">SELECT  * FROM tbname WHERE age &gt;&#x3D; 20 AND age &lt;&#x3D; 30;</span><br><span class="line">SELECT  * FROM tbname WHERE BETEEN 20 AND 30;</span><br><span class="line"></span><br><span class="line">-- 查询年龄为18，20，30岁的人</span><br><span class="line">SELECT  * FROM tbname WHERE age &#x3D; 18 || age &#x3D; 20 || age &#x3D; 30;</span><br><span class="line">SELECT  * FROM tbname WHERE age &#x3D; 18 OR age &#x3D; 20 OR age &#x3D; 30;</span><br><span class="line">SELECT  * FROM tbname WHERE age IN (18,20,30);</span><br><span class="line">-- 查询年龄不为18，20，30岁的人</span><br><span class="line">SELECT  * FROM tbname WHERE age NOT IN (18,20,30);</span><br><span class="line"></span><br><span class="line">-- 查询英语成绩为null</span><br><span class="line">SELECT  * FROM tbname WHERE english IS NULL;</span><br><span class="line">-- 查询英语成绩为不null </span><br><span class="line">SELECT  * FROM tbname WHERE english IS NOT NULL;</span><br><span class="line"></span><br><span class="line">-- 查询姓马的人</span><br><span class="line">SELECT * FROM tbname WHERE name LIKE &quot;马%&quot;;</span><br><span class="line">-- 查询姓名中第二个字为化的人</span><br><span class="line">SELECT * FROM tbname WHERE name LIKE &quot;_化%&quot;;</span><br><span class="line">-- 查询姓名中包含化的人</span><br><span class="line">SELECT * FROM tbname WHERE name LIKE &quot;%化%&quot;;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h3><ul>
<li><p>内连接<br>  显式内连接：</p>
<pre><code>select 字段列表 from 表名1 inner join 表名2 on 条件</code></pre><p>  隐式内连接：</p>
<pre><code>使用 where 条件消除无用数据</code></pre></li>
<li><p>外链接<br>  左外连接：</p>
<pre><code>select 字段列表 from 表1 left [outer] join 表2 on 条件;
(查询的是左表所有字段以及其交集部分)</code></pre><p>  右外链接</p>
<pre><code>select 字段列表 from 表1 right [outer] join 表2 on 条件;
(查询的是右表所有字段以及其交集部分)</code></pre></li>
<li><p>子查询</p>
</li>
</ul>
<p><strong>概念</strong>：查询中嵌套查询，成嵌套查询为子查询。</p>
<ol>
<li>子查询的结果是<code>单行单列</code><br> 子查询可以作为条件，使用运算符去判断。运算符：<code>&gt; / &gt;= / &lt; / &lt;= / =</code><br> eg： <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from emp where emp.salary &lt; (select avg(salary) from emp);</span><br></pre></td></tr></table></figure></li>
<li>子查询的结果是<code>多行单列</code><br> 子查询可以作为条件，使用运算符 <code>IN</code> 去判断<br> eg： <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from emp where dept_id in (select id from dept where name in(&#39;财务部&#39;,&#39;市场部&#39;));</span><br></pre></td></tr></table></figure></li>
<li>子查询的结果是<code>多行多列</code><br> 子查询可以作为一张虚拟表参与查询<br> eg： <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">select * from dept t1,(select  * from emp where emp.&#96;join_date&#96; &gt; &#39;2011-11-11&#39;) t2</span><br><span class="line">where t1.id &#x3D; t2.dept_id;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="约束-Constriant"><a href="#约束-Constriant" class="headerlink" title="约束(Constriant)"></a>约束(Constriant)</h2><p>对表中的数据进行限定，保证数据的正确性，完整性和有效性。</p>
<h3 id="非空约束"><a href="#非空约束" class="headerlink" title="非空约束"></a>非空约束</h3><p><code>not null</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">-- 1. 创建表时添加约束</span><br><span class="line">create table tbname(</span><br><span class="line">    id int;</span><br><span class="line">    name varchar(20) not null</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 2. 删除name的非空约束</span><br><span class="line">alter table tbname modify name varchar(20);</span><br><span class="line"></span><br><span class="line">-- 3. 创建完表后，添加非空约束</span><br><span class="line">alter table tbname modify name varchar(20) not null;</span><br></pre></td></tr></table></figure>

<h3 id="唯一约束"><a href="#唯一约束" class="headerlink" title="唯一约束"></a>唯一约束</h3><p><code>unique</code>,值不能重复</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- 1. 创建表时，添加唯一约束</span><br><span class="line">create table tbname(</span><br><span class="line">    id int.</span><br><span class="line">    phone_number varchar(20) unique</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 2.删除唯一约束</span><br><span class="line">-- 错误写法 drop table tbname modify phone_number varchar(20);</span><br><span class="line">alter table tbname drop index phone_number;</span><br><span class="line"></span><br><span class="line">-- 3. 创建表之后添加唯一约束</span><br><span class="line">alter table tbname modify phone_number varchar(20);</span><br></pre></td></tr></table></figure>

<h3 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h3><p><code>primary key</code>，非空而且唯一，一张表只能有一个主键字段，唯一标识。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- 1. 创建表时，添加主键约束</span><br><span class="line">create table tbname(</span><br><span class="line">    id int primary key,</span><br><span class="line">    name varchar(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 2. 删除主键约束</span><br><span class="line">-- 错误写法：alter table tbname modify id int;</span><br><span class="line">alter table tbname drop primary key;</span><br><span class="line"></span><br><span class="line">-- 3. 创建完表后，添加主键约束</span><br><span class="line">alter table tbname modify id int primary key;</span><br></pre></td></tr></table></figure>
<h3 id="自增长"><a href="#自增长" class="headerlink" title="自增长"></a>自增长</h3><p><code>auto_increment</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- 1. 创建表时添加主键并且指定为自增长</span><br><span class="line">create table tbname(</span><br><span class="line">    id int primary key auto_increment,</span><br><span class="line">    name varchar(20)</span><br><span class="line">);</span><br><span class="line">-- 2. 删除自增长</span><br><span class="line">alter table tbname modify id int;</span><br><span class="line">-- 3. 创建完表后添加自增长</span><br><span class="line">alter table tbname modify id int auto_increment;</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：一般情况下<code>auto_increment</code> 与<code>primary key</code> 搭配使用，但是它也是可以单独使用的。</p>
<h3 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h3><p><code>foreign key</code>，让表与表产生关系，从而保证数据的正确性。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- 1. 在创建表时，可以添加外键。</span><br><span class="line"></span><br><span class="line">create table tbname(</span><br><span class="line">    .....</span><br><span class="line">    外键列</span><br><span class="line">    constriant 外键名称 foreign key(外键列名称) references 主表名称(主表列名称)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 2. 删除外键</span><br><span class="line">alter table tbname drop foreign key 外键名称;</span><br><span class="line"></span><br><span class="line">-- 3. 创建完表之后，添加外键</span><br><span class="line">alter table tbname add constraint 外键名称 foreign key(外键列名) references 主表名称(主表列名);</span><br></pre></td></tr></table></figure>

<h3 id="级联操作"><a href="#级联操作" class="headerlink" title="级联操作"></a>级联操作</h3><p>在操作相关联的表的数据时候，会同步更新或者删除</p>
<ol>
<li>添加级联<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table tbname add constraint 外键名称 foreign key(外键列名) references 主表名称(主表列名) on update cascade on delete cascade;</span><br></pre></td></tr></table></figure></li>
<li>分类<br> 级联更新：<code>on update cascade</code><br> 级联删除：<code>on delete cascade</code></li>
</ol>
<h2 id="数据库的设计"><a href="#数据库的设计" class="headerlink" title="数据库的设计"></a>数据库的设计</h2><h3 id="多表之间的关系"><a href="#多表之间的关系" class="headerlink" title="多表之间的关系"></a>多表之间的关系</h3><ul>
<li>一对一 &lt;1:1&gt;<pre><code>eg：人和身份证</code></pre>实现方式：一对一关系的实现，可以在任意一方添加唯一外键指向另一方的外键。一般还是建议合并为一张表。</li>
<li>一对多（多对一）&lt;1:n/n:1&gt;<pre><code>eg：部门和员工</code></pre>实现方式：在多的一方建立外键，指向一的一方的主键。</li>
<li>多对多 &lt;m:n&gt;<pre><code>eg：学生和课程</code></pre>实现方式：多对多关系实现需要借助第三章中间表，中间表至少包含两个字段，这两个字段作为第三张表的外键，分别指向两张表的主键。也可以使用联合主键。</li>
</ul>
<h3 id="数据库设计的范式"><a href="#数据库设计的范式" class="headerlink" title="数据库设计的范式"></a>数据库设计的范式</h3><ul>
<li>第一范式（1NF）：每一列都是不可分割的原子数据项。</li>
<li>第二范式（2NF）：在1NF的基础上，非码属性必须完全依赖于码（在1NF的基础上非主属性对主码的部分函数依赖）</li>
</ul>
<ol>
<li><code>函数依赖</code>：A–&gt;B，如果A属性（属性组）的值，可以确定唯一的B属性的值，则称B依赖于A。<pre><code>eg：学号--&gt;姓名。（学号，课程名称）--&gt;分数</code></pre></li>
<li><code>完全函数依赖</code>：A–&gt;B，如果A是一个属性组，则B属性值的确定需要依赖于A属性组中所有的属性值。<pre><code>eg：（学号，课程名称）--&gt;分数</code></pre></li>
<li><code>部分函数依赖</code>：A–&gt;B，如果A是一个属性组，则B属性值的确定只需要依赖A属性组中某一些值即可。<pre><code>eg：（学号，课程名称）--&gt;姓名</code></pre></li>
<li><code>传递函数依赖</code>：A–&gt;B，B–&gt;C；如果A属性（属性组），可以唯一确定B属性的值；B属性（属性组）的值可以唯一确定C属性的值，则称C传递函数依赖于A<pre><code>eg：学号--&gt;系名，系名-&gt;系主任</code></pre></li>
<li><code>码</code>：如果在一张表中，一个属性或者属性组，被其他所有属性所完全依赖，则称这个属性（属性组）为该表的码<br> <code>主属性</code>：码属性组中的所有属性<br> <code>非主属性</code>：除过码属性组的所有属性</li>
</ol>
<ul>
<li>第三范式（3NF）：在2NF基础上，任何非主属性不依赖于其他非主属性（在2NF基础上消除传递依赖）</li>
</ul>
<h2 id="数据库的备份和还原"><a href="#数据库的备份和还原" class="headerlink" title="数据库的备份和还原"></a>数据库的备份和还原</h2><h3 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; mysqldump -u用户名 -p密码 &gt; 保存的路径</span><br></pre></td></tr></table></figure>
<h3 id="还原"><a href="#还原" class="headerlink" title="还原"></a>还原</h3><ol>
<li>登录数据库 mysql -uroot -proot </li>
<li>创建数据库 create database dbname</li>
<li>使用数据库 use dbname</li>
<li>执行以下命令：<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mysql&gt; source 文件路径</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><h3 id="事务的基本介绍"><a href="#事务的基本介绍" class="headerlink" title="事务的基本介绍"></a>事务的基本介绍</h3><ul>
<li>概念：如果一个包含多个步骤的业务操作，被事务管理，那么这些操作要么同时成功，要么同时失败。</li>
<li>操作：</li>
</ul>
<ol>
<li>开启事务：<code>start transaction;</code></li>
<li>回滚：<code>rollback;</code></li>
<li>提交：<code>commit;</code></li>
<li>事务的两种提交方式<br> 自动：MySQL 就是自动提交的，一条DML（增删改）语句会自动提交一次事务。<br> 手动：Oracle 数据库默认手动提交事务。需要先开启事务再提交。<br> 修改事务的提交方式：<pre><code>select @@autocommit;-- 1代表自动，0代表手动
set @@autocommit = 0;</code></pre></li>
</ol>
<h3 id="事务的四大基本特征"><a href="#事务的四大基本特征" class="headerlink" title="事务的四大基本特征"></a>事务的四大基本特征</h3><ol>
<li>原子性：是不可分割的最小操作单位，要么同时成功，要么同时失败。</li>
<li>持久性：当事务提交或回滚后，数据库会持久化的保存数据。</li>
<li>隔离性：多个事务之间，相互独立。</li>
<li>一致性：事务操作前后，数据总量不变。</li>
</ol>
<h3 id="事务的隔离级别"><a href="#事务的隔离级别" class="headerlink" title="事务的隔离级别"></a>事务的隔离级别</h3><ul>
<li>概念<br>多个事务之间是独立的，相互隔离的；但是如果多个事务操作同一批数据，则会引发一些问题，设置不同的隔离级别就可以解决这些问题。</li>
<li>存在问题</li>
</ul>
<ol>
<li>脏读：一个事务，读取到另外一个事务中没有提交的数据。</li>
<li>不可重复读（虚读）：在同一个事务中，两次读取到的数据不一样。</li>
<li>幻读：一个事务操作（DML）数据表中所有事物，另一个事务添加了一条数据，则第一个事务查询不到自己的修改。</li>
</ol>
<ul>
<li>隔离级别</li>
</ul>
<ol>
<li><code>read uncommitted</code>：读未提交；产生的问题：脏读、不可重复读、幻读</li>
<li><code>read committed</code>：读已提交（Oracle 默认）；产生的问题：不可重复读、幻读</li>
<li><code>repeatable read</code>：可重复读（MySQL 默认）；产生的问题：幻读</li>
<li><code>serializable</code>：串行化；可以解决所有问题</li>
</ol>
<p><strong>注意</strong>：隔离级别从小到大，安全性越来越高，但是效率越来越低。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- 查询隔离级别</span><br><span class="line">select @@tx_isolation;</span><br><span class="line">-- 设置隔离级别</span><br><span class="line">set global transaction isolation level 级别字符串;</span><br></pre></td></tr></table></figure>
<h2 id="DCL-管理、授权用户"><a href="#DCL-管理、授权用户" class="headerlink" title="DCL 管理、授权用户"></a>DCL 管理、授权用户</h2><h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><ol>
<li>添加用户<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create user &#39;用户名&#39;@&#39;主机名&#39; identified by &#39;密码&#39;;</span><br></pre></td></tr></table></figure></li>
<li>删除用户<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">drop user &#39;用户名&#39;@&#39;主机名&#39;;</span><br></pre></td></tr></table></figure></li>
<li>修改用户密码<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">update user set password  &#x3D; password(&#39;新密码&#39;) where user &#x3D; &#39;用户名&#39;;</span><br><span class="line">set password for &#39;用户名&#39;@&#39;主机名&#39; &#x3D; password(&#39;新密码&#39;);</span><br></pre></td></tr></table></figure></li>
<li>查询用户<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-- 切换到mysql数据库</span><br><span class="line">use mysql;</span><br><span class="line">-- 查询user表</span><br><span class="line">select * from user;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>注意</strong>：通配符<code>%</code>表示可以在任意主机使用该用户登录数据库</p>
<h3 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h3><ol>
<li>查询权限<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">show grant for &#39;用户名&#39;@&#39;主机名&#39;;</span><br></pre></td></tr></table></figure></li>
<li>授予权限<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">grant 权限列表 on 数据库名.表名 to &#39;用户名&#39;@&#39;主机名&#39;;</span><br><span class="line"></span><br><span class="line">-- 给张三用户授予所有权限，在任意数据库任意表上。</span><br><span class="line">eg:grant all on *.* to &#39;zhangsan&#39;@&#39;localhost&#39;;</span><br></pre></td></tr></table></figure></li>
<li>撤销权限<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">revoke 权限列表 on 数据库名.表名 from &#39;用户名&#39;@&#39;主机名&#39;;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="修改-mysql-设置"><a href="#修改-mysql-设置" class="headerlink" title="修改 mysql 设置"></a>修改 mysql 设置</h2><h3 id="更改默认编码"><a href="#更改默认编码" class="headerlink" title="更改默认编码"></a>更改默认编码</h3><p>查看 mysql 数据库的默认编码命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mysql&gt; show variable like <span class="string">'character%'</span>;</span><br><span class="line"></span><br><span class="line">+--------------------------+--------------------------------------------------------+</span><br><span class="line">| Variable_name            | Value                                                  |</span><br><span class="line">+--------------------------+--------------------------------------------------------+</span><br><span class="line">| character_set_client     | utf8                                                   |</span><br><span class="line">| character_set_connection | utf8                                                   |</span><br><span class="line">| character_set_database   | latin1                                                 |</span><br><span class="line">| character_set_filesystem | binary                                                 |</span><br><span class="line">| character_set_results    | utf8                                                   |</span><br><span class="line">| character_set_server     | latin1                                                 |</span><br><span class="line">| character_set_system     | utf8                                                   |</span><br><span class="line">| character_sets_dir       | /usr/<span class="built_in">local</span>/mysql-5.7.10-osx10.9-x86_64/share/charsets/ |</span><br><span class="line">+--------------------------+--------------------------------------------------------+</span><br><span class="line">8 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br></pre></td></tr></table></figure>
<p>可见 database 和 server 的字符集使用了 <code>latin1</code> 编码方式，不支持中文，即存储中文时会出现乱码。以下修改方法：</p>
<ol>
<li>cd /private/etc/</li>
<li>新增一个 my.cnf 文件</li>
<li>然后写入以下命令保存退出<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[client]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"> </span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"> </span><br><span class="line">[mysqld]</span><br><span class="line">collation-server = utf8_unicode_ci</span><br><span class="line">init-connect=<span class="string">'SET NAMES utf8'</span></span><br></pre></td></tr></table></figure></li>
<li>重启 mysql</li>
</ol>
<h3 id="忘记root用户密码"><a href="#忘记root用户密码" class="headerlink" title="忘记root用户密码"></a>忘记root用户密码</h3><ol>
<li>net stop mysql</li>
<li>mysqld –skip-grant-tables(使用无验证服务启动mysql服务)</li>
<li>打开新的终端窗口，直接输入 <code>mysql</code> 命令</li>
<li>use mysql;</li>
<li>update user set password = password(‘新密码’) where user = ‘root’;</li>
<li>关闭两个窗口，并结束 <code>mysqld</code> 进程</li>
<li>启动 <code>mysql</code> 服务</li>
<li>使用新密码登录</li>
</ol>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/MySQL/">MySQL</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/MySQL/">MySQL</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="https://hashcode.cn/2019/05/09/mysql/" data-title="MySQL 基本使用 | techbird blog" data-tsina="6488657373" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2019/05/25/java-jdbc/" title="JDBC 基本使用">
  <strong>上一篇：</strong><br/>
  <span>
  JDBC 基本使用</span>
</a>
</div>


<div class="next">
<a href="/2019/05/04/daily-2019-0504/"  title="写在百年五四">
 <strong>下一篇：</strong><br/> 
 <span>写在百年五四
</span>
</a>
</div>

</nav>

	

<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
  </div>
</section>



</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL的分类"><span class="toc-number">1.</span> <span class="toc-text">SQL的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DDL-Data-Definition-Language"><span class="toc-number">1.1.</span> <span class="toc-text">DDL(Data Definition Language)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DML-Data-Manipulation-Language"><span class="toc-number">1.2.</span> <span class="toc-text">DML(Data Manipulation Language)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DQL-Data-Query-Language"><span class="toc-number">1.3.</span> <span class="toc-text">DQL(Data Query Language)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DCL-Data-Control-Language"><span class="toc-number">1.4.</span> <span class="toc-text">DCL(Data Control Language)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DDL-操作数据库-CRUD"><span class="toc-number">2.</span> <span class="toc-text">DDL 操作数据库(CRUD)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#C-Create"><span class="toc-number">2.1.</span> <span class="toc-text">C(Create)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#R-Retrieve"><span class="toc-number">2.2.</span> <span class="toc-text">R(Retrieve)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#U-Update"><span class="toc-number">2.3.</span> <span class="toc-text">U(Update)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#D-Delete"><span class="toc-number">2.4.</span> <span class="toc-text">D(Delete)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用数据库"><span class="toc-number">2.5.</span> <span class="toc-text">使用数据库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DML-操作表"><span class="toc-number">3.</span> <span class="toc-text">DML 操作表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#C-Create-1"><span class="toc-number">3.1.</span> <span class="toc-text">C(Create)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#R-Retrieve-1"><span class="toc-number">3.2.</span> <span class="toc-text">R(Retrieve)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#U-Update-1"><span class="toc-number">3.3.</span> <span class="toc-text">U(Update)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除数据"><span class="toc-number">3.4.</span> <span class="toc-text">删除数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改数据"><span class="toc-number">3.5.</span> <span class="toc-text">修改数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DQL-查询语句"><span class="toc-number">4.</span> <span class="toc-text">DQL 查询语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#排序查询"><span class="toc-number">4.1.</span> <span class="toc-text">排序查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#聚合函数"><span class="toc-number">4.2.</span> <span class="toc-text">聚合函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分组查询"><span class="toc-number">4.3.</span> <span class="toc-text">分组查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分页查询"><span class="toc-number">4.4.</span> <span class="toc-text">分页查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DQL-查询表中的语句"><span class="toc-number">5.</span> <span class="toc-text">DQL 查询表中的语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#语法"><span class="toc-number">5.1.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基础查询"><span class="toc-number">5.2.</span> <span class="toc-text">基础查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#条件查询"><span class="toc-number">5.3.</span> <span class="toc-text">条件查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多表查询"><span class="toc-number">5.4.</span> <span class="toc-text">多表查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#约束-Constriant"><span class="toc-number">6.</span> <span class="toc-text">约束(Constriant)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#非空约束"><span class="toc-number">6.1.</span> <span class="toc-text">非空约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#唯一约束"><span class="toc-number">6.2.</span> <span class="toc-text">唯一约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#主键约束"><span class="toc-number">6.3.</span> <span class="toc-text">主键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自增长"><span class="toc-number">6.4.</span> <span class="toc-text">自增长</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#外键约束"><span class="toc-number">6.5.</span> <span class="toc-text">外键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#级联操作"><span class="toc-number">6.6.</span> <span class="toc-text">级联操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据库的设计"><span class="toc-number">7.</span> <span class="toc-text">数据库的设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#多表之间的关系"><span class="toc-number">7.1.</span> <span class="toc-text">多表之间的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库设计的范式"><span class="toc-number">7.2.</span> <span class="toc-text">数据库设计的范式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据库的备份和还原"><span class="toc-number">8.</span> <span class="toc-text">数据库的备份和还原</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#备份"><span class="toc-number">8.1.</span> <span class="toc-text">备份</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#还原"><span class="toc-number">8.2.</span> <span class="toc-text">还原</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#事务"><span class="toc-number">9.</span> <span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#事务的基本介绍"><span class="toc-number">9.1.</span> <span class="toc-text">事务的基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事务的四大基本特征"><span class="toc-number">9.2.</span> <span class="toc-text">事务的四大基本特征</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事务的隔离级别"><span class="toc-number">9.3.</span> <span class="toc-text">事务的隔离级别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DCL-管理、授权用户"><span class="toc-number">10.</span> <span class="toc-text">DCL 管理、授权用户</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#用户管理"><span class="toc-number">10.1.</span> <span class="toc-text">用户管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#权限管理"><span class="toc-number">10.2.</span> <span class="toc-text">权限管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#修改-mysql-设置"><span class="toc-number">11.</span> <span class="toc-text">修改 mysql 设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#更改默认编码"><span class="toc-number">11.1.</span> <span class="toc-text">更改默认编码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#忘记root用户密码"><span class="toc-number">11.2.</span> <span class="toc-text">忘记root用户密码</span></a></li></ol></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github Card</p>
<div class="github-card" data-github="qiudengqiang" data-theme="medium"></div>
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>



  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/Daily/" title="Daily">Daily<sup>14</sup></a></li>
		  
		
		  
			<li><a href="/categories/DataBase/" title="DataBase">DataBase<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Java/" title="Java">Java<sup>9</sup></a></li>
		  
		
		  
			<li><a href="/categories/Journey/" title="Journey">Journey<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/Linux/" title="Linux">Linux<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/MySQL/" title="MySQL">MySQL<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS/Objc/" title="Objc">Objc<sup>13</sup></a></li>
		  
		
		  
			<li><a href="/categories/Readed/" title="Readed">Readed<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/VSCode/" title="VSCode">VSCode<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Web/" title="Web">Web<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/Xcode/" title="Xcode">Xcode<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS/" title="iOS">iOS<sup>16</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/iOS/" title="iOS">iOS<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/Daily/" title="Daily">Daily<sup>14</sup></a></li>
			
		
			
				<li><a href="/tags/Objc/" title="Objc">Objc<sup>11</sup></a></li>
			
		
			
				<li><a href="/tags/Java/" title="Java">Java<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/Readed/" title="Readed">Readed<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Web/" title="Web">Web<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/Thread/" title="Thread">Thread<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Network/" title="Network">Network<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/Journey/" title="Journey">Journey<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/MySQL/" title="MySQL">MySQL<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Xcode/" title="Xcode">Xcode<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Category/" title="Category">Category<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/keywords/" title="keywords">keywords<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Idea/" title="Idea">Idea<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/KVC/" title="KVC">KVC<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/KVO/" title="KVO">KVO<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/NSThread/" title="NSThread">NSThread<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/NSURLRequest/" title="NSURLRequest">NSURLRequest<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/NSURLResponse/" title="NSURLResponse">NSURLResponse<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/NSURLSession/" title="NSURLSession">NSURLSession<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
    <iframe width="100%" height="120" class="share_self"  frameborder="0" scrolling="no" src="https://widget.weibo.com/weiboshow/index.php?language=&width=0&height=120&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=6488657373&verifier=f458bf46&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> You can&#39;t connect the dots looking forward <br/>
			You can only connect them looking backwards.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/6488657373" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/qiudengqiang" target="_blank" class="icon-github" title="github"></a>
		
		
		
		<a href="https://twitter.com/murendless" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		
		
		
		
		
		<a href="mailto:qiudengqiang@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2022 
		
		<a href="/about" target="_blank" title="techbird">techbird</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>




<script type="text/javascript">

var disqus_shortname = 'techbird-1';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>








<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
